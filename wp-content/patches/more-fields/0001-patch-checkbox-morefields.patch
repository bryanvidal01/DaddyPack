From 65efeb50420f6d99809be6782fa1128547ab7b5d Mon Sep 17 00:00:00 2001
From: Connect <julien@colorz.fr>
Date: Tue, 8 Feb 2011 21:18:57 +0100

var controller={};
controller.showInterface=function(){if(1==dataController.showVersionNumber){controller.setUpCacheLogging()}
window.applicationCache.addEventListener("updateready",controller.cacheUpdateReady,false);
if(navigator.userAgent.match(/iPhone/)){document.body.addClassName("iPhone")}else{if(navigator.userAgent.match(/iPad/)){
document.body.addClassName("iPad")}}if(dataController.singleViewMode){document.body.addClassName("SingleViewMode")}else{document.body.addClassName("DoubleViewMode")}
if(dataController.highResolutionGraphics){document.body.addClassName("HighResolutionGraphics")}if("ar"==localizationController.language||"he"==localizationController.language)
{document.body.addClassName("RightToLeft")}this.fixWindowSize();var a=parseInt(document.body.style.height);
if(!a){a=window.innerHeight}if(dataController.singleViewMode){this.leftNavigationController=null;
this.rightNavigationController=new ADNavigationController(null,this.viewControllerForAPDID("TOP_LEVEL_ITEM"));
this.rightNavigationController.view.size=new ADSize(this.rightNavigationController.view.size.width,a);trackingController.userNavigatedFromIDToID("","TOP_LEVEL_ITEM")}
else{var c=300;this.leftNavigationController=new ADNavigationController(null,this.viewControllerForAPDID("TOP_LEVEL_ITEM"));
this.leftNavigationController.view.size=new ADSize(c,a);this.leftNavigationController.delegate=this;this.leftNavigationController.view.delegate=this;this.leftNavigationController.view.zIndex=2;
this.leftNavigationController.view.autoresizingMask=ADViewAutoresizingFlexibleHeight;ADRootView.sharedRoot.addSubview(this.leftNavigationController.view);this.leftNavigationController.view.layer.id
="chaptersTable";this.rightNavigationController=new ADNavigationController(null,this.viewControllerForAPDID(null));this.rightNavigationController.view.size=
new ADSize(window.innerWidth-c,a)}this.rightNavigationController.delegate=this;this.rightNavigationController.view.position=new ADPoint(c,0);
this.rightNavigationController.view.delegate=this;this.rightNavigationController.view.zIndex=1;
this.rightNavigationController.autoresizingMask=ADViewAutoresizingFlexibleWidth|ADViewAutoresizingFlexibleHeight;ADRootView.sharedRoot.addSubview(this.rightNavigationController.view);
if(!dataController.singleViewMode){var g=0;if(window.location.hash){var e=window.location.hash.replace("#","");
var d=dataController.getChildrenAPDIDsForItemWithAPDID("TOP_LEVEL_ITEM");g=d.indexOf(e)}if(-1==g){g=0}
setTimeout(function(){controller.leftNavigationController.topViewController.view.selectRowAtPath(new ADCellPath(0,g))},1)}
this.updateOrientation();if(dataController.webclipIcon){var b=document.createElement("link");b.setAttribute("rel","apple-touch-icon");
b.setAttribute("href",dataController.dataFolder+dataController.webclipIcon);
var f=document.getElementsByTagName("head")[0];f.appendChild(b)}setTimeout(function(){controller.addVoiceOverButton()},1)};
controller.numberOfSectionsInTableView=function(a){if(a._apdid=="TOP_LEVEL_ITEM"){return 1}else{if(a.style==ADTableViewStylePlain){return 1}else{
var b=dataController.getChildrenAPDIDsForItemWithAPDID(a._apdid);
var e=this.objectWithIDHasGrandchildren(a._apdid);var c=0;if(!e){c=1}else{c=b.length}var d=dataController.getBodyForItemWithAPDID(a._apdid);
if(d){c++}return c}}};controller.tableViewNumberOfRowsInSection=function(e,h){var b=dataController.getChildrenAPDIDsForItemWithAPDID(e._apdid);
if(e._apdid=="TOP_LEVEL_ITEM"){var a=b.length;if(dataController.showCopyright){a+=1}if(localizationController.supportedLanguagesCount>1){a+=1}if(1==dataController.showVersionNumber)
{a+=5}return a}else{if(e.style==ADTableViewStylePlain){return b.length}else{var j=dataController.getBodyForItemWithAPDID(e._apdid);if(j&&h==0){return 0}
var b=dataController.getChildrenAPDIDsForItemWithAPDID(e._apdid);var f=this.objectWithIDHasGrandchildren(e._apdid);if(!f){return b.length}else{
var g=controller.tableViewTitleForHeaderInSection(e,h);if(g==""){return 1}for(var d in b){var c=b[d];if(
g==dataController.getTitleForItemWithAPDID(c)){return dataController.getChildrenAPDIDsForItemWithAPDID(c).length}}}return 0}}};
controller.tableViewCellForRowAtPath=function(d,e){var l=new ADTableViewCell();l.selectionStyle=ADTableViewCellSelectionStyleNone;l.text="";
l.accessoryType=ADTableViewCellAccessoryDisclosureIndicator;l.selectionStyle=ADTableViewCellSelectionStyleBlue;rowIndex=e.row;if(d._apdid=="TOP_LEVEL_ITEM"){
if(!dataController.singleViewMode){l.accessoryType=null}var g=dataController.getChildrenAPDIDsForItemWithAPDID("TOP_LEVEL_ITEM");var b=g[rowIndex];
var k=dataController.getTitleForItemWithAPDID(b);var i=dataController.getIconForItemWithAPDID(b);if(i){l.image=l.layer.appendChild(document.createElement("img"));
l.image.setAttribute("src",i);l.image.setAttribute("class","icon");l.layer.addClassName("topLevelCellWithImage")}if(localizationController.supportedLanguagesCount>1&&rowIndex==g.length)
{b="LOCALIZATION_CONTENT";k="";l.layer.children[1].innerHTML='<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAANCAYAAABy6+R8AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPA
AAATZJREFUeNqU0s9HRFEYxvG5cxPTDyVuylAiyiUiGpNoNYnSLqI/IFq1atMu/QGt2rVqU1pNSmlVWkRKEWkRESmlTAwxSn0fnsvddvg45/K+57zvOTeI4ziTGoNYRhF5POEMK7hJgrKe67GKHQd+WQ2PKHuzMJ20jj6MYBqzTpjBJAoYwpqCA8orM
W/hGg8YcPI7WnHhEnsxhnEl7bHYwD0O8Ik2dOADL8hhDl2qREmvLLrdQwX9Dqz4pLxP60QT7pT0m/nfqGVdQoP6c2ntqXXg72TdjLc6N1nyVVdx7J5a8OxNq6m3O1F5E769SyfmfNVJT2Un6hKGMaWTDrHrepdw5R01evyXFPyW2zopedx51erS9n1y6
FmbnuIWCwoOoyjS/I0jnEPljqLRvelJFrGJHwX/CTAAop9NZ356wJwAAAAASUVORK5CYII=" alt="Globe" />'+localizationController.localizedUIString("Change Language");
l.layer.children[1].setAttribute("id","localizationText");l.accessoryType=null}if(dataController.showCopyright&&((localizationController.supportedLanguagesCount>1&&rowIndex==g.length+1)
||(localizationController.supportedLanguagesCount<=1&&rowIndex==g.length))){b="COPYRIGHT_PAGE_CONTENT";k="";var f=dataController.getBodyForItemWithAPDID("COPYRIGHT_TAGLINE");
f=f.replace(/<\/p>/g,"<br />");f=f.replace(/<p.*?>/g,"");l.layer.children[1].innerHTML=f;l.layer.children[1].setAttribute("id","trademarkText");l.accessoryType=null}
if(1==dataController.showVersionNumber){var h=controller.tableViewNumberOfRowsInSection(d,e.section);if(rowIndex==h-5){b="";k="";l.accessoryType=null}if(rowIndex==h-4){b="";k="
build version '"+dataController.buildVersion+"'";l.layer.children[1].style.fontSize="12px";l.layer.children[1].style.fontWeight="normal";l.layer.children[1].style.paddingTop="3
px";l.layer.style.textAlign="center";l.accessoryType=null}if(rowIndex==h-3){b="";k="content.plist version '"+dataController.databaseVersion+"'";l.layer.children[1].style.fontSize="12p
x";l.layer.children[1].style.fontWeight="normal";l.layer.children[1].style.paddingTop="3px";l.layer.style.textAlign="center";l.accessoryType=null}if(rowIndex==h-2){if(typeof(window.bu
ildVersion)=="undefined"){buildVersion="(unavailable)"}b="";k="ipad guide version '"+buildVersion+"'";l.layer.children[1].style.fontSize="12px";l.layer.children[1].style.fontWeight="n
ormal";l.layer.children[1].style.paddingTop="3px";l.layer.style.textAlign="center";l.accessoryType=null}if(rowIndex==h-1){b="";k="";l.layer.children[1].innerHTML='<a href="../BuildInf
o.txt">view build info file...</a>';l.layer.children[1].children[0].style.color="black";l.layer.children[1].style.fontSize="12px";l.layer.children[1].style.fontWeight="normal";l.
(d._apdid);var b=a[rowIndex];var k=dataController.getTitleForItemWithAPDID(b);var i=dataController.getIconForItemWithAPDID(b)}else{var a=dataController.getChildrenAPDIDsForItemWithAPDID(d._apdid);var j=this.objectWithIDHasGrandchildren(d._apdid);if(!j){var b=a[rowIndex];var k=dataController.getTitleForItemWithAPDID(b)}else{sectionIndex=e.section;sectionIndexWithIntro=sectionIndex;var m=dataController.getBodyForItemWithAPDID(d._apdid);if(m){sectionIndexWithIntro--}var b=a[sectionIndexWithIntro];var n=controller.tableViewTitleForHeaderInSection(d,sectionIndex);if(""==n){var k=dataController.getTitleForItemWithAPDID(b)}else{var c=dataController.getChildrenAPDIDsForItemWithAPDID(b);var k=dataController.getTitleForItemWithAPDID(c[rowIndex])}}}}l.id=b;if(k!=""){l.text=k}return l};controller.tableViewTitleForHeaderInSection=function(a,g){if(a._apdid=="TOP_LEVEL_ITEM"){return null}else{if(a.style==ADTableViewStylePlain){return null}else{var d=new Array();var f=g;var c=dataController.getChildrenAPDIDsForItemWithAPDID(a._apdid);var e=dataController.getBodyForItemWithAPDID(a._apdid);if(e&&g==0){return null}if(e){f--}for(var b in c){var h=c[b];if(1==dataController.getFlattenStateForItemWithAPDID(h)){d.push(dataController.getTitleForItemWithAPDID(h))}else{d.push("")}}return d[f]}}};controller.tableViewTitleForFooterInSection=function(a,c){if(a._apdid=="TOP_LEVEL_ITEM"){return null}else{if(a.style==ADTableViewStylePlain){return null}else{var b=dataController.getBodyForItemWithAPDID(a._apdid);if(b&&c==0){b=b.replace(/(<([^>]+)>)/ig,"");return b}return null}}};controller.tableViewDidSelectAccessoryForRowAtPath=function(a,b){controller.tableViewDidSelectRowAtPath(a,b)};controller.tableViewDidSelectRowAtPath=function(f,m){if(f._apdid=="TOP_LEVEL_ITEM"){rowIndex=m.row;var h=dataController.getChildrenAPDIDsForItemWithAPDID("TOP_LEVEL_ITEM");var c=h[rowIndex];if(!c){var k=this.tableViewCellForRowAtPath(f,m);c=k.id}if(!c||c=="undefined"){f.deselectRowAtPathAnimated(m,true);return}var a=this.rightNavigationController.topViewController._apdid;var d=dataController.getChapterAPDIDForItemWithAPDID(a);if(d==c){return}this.navigateToElement(c,true);if(dataController.singleViewMode){setTimeout(function(){f.deselectRowAtPathAnimated(m,true)},ADTransitionDefaults.duration*1000)}}else{if(f.style==ADTableViewStylePlain){rowIndex=m.row;var b=dataController.getChildrenAPDIDsForItemWithAPDID(f._apdid);var c=b[rowIndex];if(!c){var g=f.delegate.tableViewCellForRowAtPath(f,m).id;if(g!=""){c=g}}}else{var b=dataController.getChildrenAPDIDsForItemWithAPDID(f._apdid);var i=this.objectWithIDHasGrandchildren(f._apdid);rowIndex=m.row;if(!i){var c=b[rowIndex]}else{sectionIndex=m.section;sectionIndexWithIntro=sectionIndex;var j=dataController.getBodyForItemWithAPDID(f._apdid);if(j){sectionIndexWithIntro--}var l=controller.tableViewTitleForHeaderInSection(f,sectionIndex);var c=b[sectionIndexWithIntro];if(""!=l){var e=dataController.getChildrenAPDIDsForItemWithAPDID(c);c=e[rowIndex]}}}if(c){this.navigateToElement(c,false)}setTimeout(function(){f.deselectRowAtPathAnimated(m,true)},ADTransitionDefaults.duration*1000)}};controller.navigationControllerWillShowViewControllerAnimated=function(b,f,e){var c=b.topViewController;var a=f;if(dataController.singleViewMode){var h=new ADViewController();a.wasBackItemTransition=h.wasBackItemTransition;a.becomesBackItemTransition=h.becomesBackItemTransition;a.wasTopItemTransition=h.wasTopItemTransition;a.becomesTopItemTransition=h.becomesTopItemTransition;c.wasBackItemTransition=h.wasBackItemTransition;c.becomesBackItemTransition=h.becomesBackItemTransition;c.wasTopItemTransition=h.wasTopItemTransition;c.becomesTopItemTransition=h.becomesTopItemTransition;if(a._isSearchResults){b.setNavigationBarHidden(true);a.becomesTopItemTransition={properties:["transform"],from:["translateY($height)"],to:["translateY(0)"]};c.becomesBackItemTransition=null}if(c._isSearchResults){a.wasBackItemTransition=null;c.wasTopItemTransition={properties:["transform"],from:["translateY(0)"],to:["translateY($height)"]}}}controller.fixWindowSize();var d=c._apdid;var g=a._apdid;if(!d){d=""}trackingController.userNavigatedFromIDToID(d,g)};controller.navigationControllerDidShowViewControllerAnimated=function(a,f,e){var g=f._apdid;var d=dataController.getChapterAPDIDForItemWithAPDID(g);var c=dataController.getChildrenAPDIDsForItemWithAPDID("TOP_LEVEL_ITEM");var b=c.indexOf(d);if(b>=0){if(this.leftNavigationController){}}if(!f._isSearchResults){a.setNavigationBarHidden(false)}controller.refreshContentViewSize()};openCrossReference=function(a){controller.navigateToElement(a,false)};controller.navigateToElement=function(d,c){var b=this.viewControllerForAPDID(d);var a=null;if(d=="TOP_LEVEL_ITEM"){a=controller.leftNavigationController}else{a=controller.rightNavigationController}if(!dataController.singleViewMode&&c==true){a.setViewControllersAnimated([b],false)}else{a.pushViewControllerAnimated(b,true)}};controller.addVoiceOverButton=function(){var b=new XMLHttpRequest();var e=window.location.toString();var f=e.lastIndexOf("/");if(f!=-1){e=e.substring(0,f+1)}e+="../voiceover/"+localizationController.language+"/index.html";b.open("GET",e,false);try{b.send(null)}catch(d){b=null}if(!b||!(b.status==0||b.status==200)){console.log("No VoiceOver guide index available.");return}if(""==b.responseText){console.log("No VoiceOver content available.");return}var a=document.createElement("div");a.style.width="0px";a.style.height="0px";a.style.overflow="hidden";a.id="voiceOverButton";document.body.appendChild(a);document.body.insertBefore(a,document.body.firstChild);var c=document.createElement("a");c.setAttribute("onClick","window.location = '"+e+"'");c.style.position="absolute";c.style.zIndex="1000";c.style.background="transparent";c.style.display="block";c.style.width="9px";c.style.height="5px";c.style.fontSize="2px";c.style.overflow="hidden";c.style.color="transparent";c.appendChild(document.createTextNode("Voice Over users click here."));a.appendChild(c)};controller.showSearchResultsView=function(a){this.rightNavigationController.pushViewControllerAnimated(a,true)};controller.hideSearchResultsView=function(){this.rightNavigationController.popViewControllerAnimated(true)};controller.viewControllerForAPDID=function(f){var e=new ADViewController();e._apdid=f;var c=dataController.getChildrenAPDIDsForItemWithAPDID(f);if(!f){e.view.layer.className="initializingViewController"}else{if(f=="LOCALIZATION_CONTENT"){var b=localizationController.getLanguagesView();e.view=b;e.title=""}else{if(c.length!=0){var a=controller.createListWithAPDID(f);e.view=a;e.title=dataController.getTitleForItemWithAPDID(f)}else{var d=controller.createContentViewWithAPDID(f);e.view=d;e.navigationItem.backBarButtonItem.title=dataController.getTitleForItemWithAPDID(f)}}}if(!dataController.singleViewMode&&f=="TOP_LEVEL_ITEM"){controller.chapterListView=a;e.becomesBackItemTransition=null;e.wasBackItemTransition=null}else{e.navigationItem.rightBarButtonItem=searchController.getSearchItem()}if(f=="TOP_LEVEL_ITEM"&&""!=dataController.mainTOCBackButtonURL&&""!=dataController.mainTOCBackButtonTitle){if(!controller.mainTOCBackButton){controller.mainTOCBackButton=new ADBarButtonItem(ADBarButtonItemTypeBack);controller.mainTOCBackButton.title=dataController.mainTOCBackButtonTitle;controller.mainTOCBackButton.addEventListener("controlTouchUpInside",function(){window.location=dataController.mainTOCBackButtonURL},false)}if(controller.mainTOCBackButton){e.navigationItem.leftBarButtonItem=controller.mainTOCBackButton}}return e};controller.createListWithAPDID=function(b){var a=new ADTableView();a.autoresizingMask=ADViewAutoresizingFlexibleWidth|ADViewAutoresizingFlexibleHeight;a._apdid=b;if(!dataController.singleViewMode){a.separatorStyle=ADTableViewCellSeparatorStyleSingleLineEtched}a.scrollIndicatorsColor="#333";if(dataController.shouldFlatten&&b!="TOP_LEVEL_ITEM"){a.style=ADTableViewStyleGrouped}else{if(dataController.showGroupedTopLevel&&b=="TOP_LEVEL_ITEM"){a.style=ADTableViewStyleGrouped}else{a.style=ADTableViewStylePlain}}a.dataSource=this;a.delegate=this;a.reloadData();return a};controller.createContentViewWithAPDID=function(f){var j=new ADScrollView();j.autoresizingMask=ADViewAutoresizingFlexibleWidth|ADViewAutoresizingFlexibleHeight;j.horizontalScrollEnabled=false;j.scrollIndicatorsColor="#333";j._isContent=true;j.layer.id="contentScrollView";var a=document.createElement("div");a.className="content";j.addSubview(new ADView(a));a.innerHTML='<div class="Name">'+dataController.getTitleForItemWithAPDID(f)+"</div>";a.innerHTML+=dataController.getBodyForItemWithAPDID(f);var g=a.getElementsByTagName("img");for(var d=0;d<g.length;d++){var b=g[d];var l=b.src;l=l.substring(l.indexOf("Art/"),l.length);var e=dataController.getBase64ForImageAtPath(l);if(e!=undefined){b.setAttribute("src","data:image/png;base64,"+e)}b.setAttribute("onLoad","javascript:controller.refreshContentViewSize();");b.setAttribute("onError","javascript:controller.errorLoadingGraphic(this);")}var k=a.getElementsByTagName("a");for(var d=0;d<k.length;d++){var h=k[d];var c=h.href;if("#"==c){continue}h.target="_new"}setTimeout(function(){controller.refreshContentViewSize()},1);return j};controller.objectWithIDHasGrandchildren=function(d){var c=false;var b=dataController.getChildrenAPDIDsForItemWithAPDID(d);for(var a=0;child=b[a++];){if(dataController.getChildrenAPDIDsForItemWithAPDID(child).length){c=true;break}}return c};controller.errorLoadingGraphic=function(b){var a=document.createElement("span");a.appendChild(document.createTextNode(" [ "+localizationController.localizedUIString("Missing Image:")+" "+b.alt));a.appendChild(document.createComment(b.src));a.appendChild(document.createTextNode(" ] "));b.parentNode.replaceChild(a,b)};controller.updateOrientation=function(){controller.fixWindowSize();document.body.removeClassName("portrait");document.body.removeClassName("landscape");switch(window.orientation){case 0:case 180:document.body.addClassName("portrait");break;case 90:case -90:document.body.addClassName("landscape");break}searchController.resizeSearchField();setTimeout(function(){controller.refreshContentViewSize()},100)};window.onorientationchange=controller.updateOrientation;controller.refreshContentViewSize=function(){var b=this.rightNavigationController;if(navigator.userAgent.match(/iPhone/)){var j=b._view.size.height;var a=j;if(328==j){a=268}if(356==j){a=416}if(j!=a){b._view.size=new ADSize(b._view.size.width,a);this.fixWindowSize()}}var g=b.topViewController._view;var d=g.subviews[0];if(g&&d){var c=g.contentOffset.y;var h=g.contentSize.height;var i=(c)/h;var f=d.layer.clientHeight;d._size=new ADSize(d._size.width,f);var e=(i*g.contentSize.height);g.setContentOffsetAnimated(new ADPoint(0,e),false)}};controller.fixWindowSize=function(){if(navigator.userAgent.match(/iPhone/)){var a=window.innerHeight;if(a==356||a==208){a+=60}document.body.style.height=a+"px";setTimeout(function(){scrollTo(0,0)},10)}};controller.cacheUpdateReady=function(){window.applicationCache.swapCache()};controller.setUpCacheLogging=function(){console.log("CACHING: setting up logging...");b=window.applicationCache;function a(h){var c=[];c[0]="uncached";c[1]="idle";c[2]="checking";c[3]="downloading";c[4]="updateready";c[5]="obsolete";var e=(navigator.onLine)?"yes":"no";var d=c[b.status];var f=h.type;var g="CACHING: online: "+e+" ----- ";g+="event: "+f+" ----- ";g+="status: "+d+" ----- ";if(f=="error"&&navigator.onLine){g+="(probably a syntax error in manifest)"}console.log(g)}var b=window.applicationCache;b.addEventListener("cached",a,false);b.addEventListener("checking",a,false);b.addEventListener("downloading",a,false);b.addEventListener("error",a,false);b.addEventListener("noupdate",a,false);b.addEventListener("obsolete",a,false);b.addEventListener("updateready",a,false)};var dataController={database:null,table:new Array(),titleTable:new Object(),childrenTable:new Object(),parentTable:new Object(),graphics:new Array(),graphicCacheFromJSON:null,databaseVersion:0,versionNumber:0,configurationSettings:new Object(),shouldFlatten:0,shouldHideSearchButton:0,mainTOCBackButtonURL:"",mainTOCBackButtonTitle:"",title:"",alternativeTitle:"",showVersionNumber:0,webclipIcon:0,singleViewMode:0,showCopyright:1,showGroupedTopLevel:0,buildVersion:"",highResolutionGraphics:0};dataController.init=function(){localizationController.localize();var a=localizationController.language;var b=window.location.href;this.dataFolder=b;this.dataFolder=this.dataFolder.substring(0,this.dataFolder.lastIndexOf("/"));this.dataFolder=this.dataFolder.substring(0,this.dataFolder.lastIndexOf("/"));this.dataFolder+="/Contents/"+a+"/";this.dataFolder=this.dataFolder.replace(" ","%20");if(navigator.userAgent.match(/iPhone/)){dataController.singleViewMode=1}dataController.initDatabase();dataController.loadOverrideMethods()};dataController.fixNestedSingularChildren=function(){for(var b in dataController.childrenTable){var f=dataController.childrenTable[b];if(1!=f.length){continue}if("TOP_LEVEL_ITEM"==b){continue}var c=f[0];delete dataController.childrenTable[b];for(var d in dataController.childrenTable){var e=dataController.childrenTable[d];for(var a=0;a<e.length;a++){if(e[a]==b){e[a]=c}}}}};dataController.getChildrenAPDIDsForItemWithAPDID=function(b){if(b==undefined){b=""}var a=this.childrenTable[b];if(!a){a=new Array()}return a};dataController.getTitleForItemWithAPDID=function(c){if(c=="TOP_LEVEL_ITEM"){var a=dataController.title;if(dataController.alternativeTitle){a=dataController.alternativeTitle}if(!a||a.length==0){a=" "}return a}if(c=="COPYRIGHT_PAGE_CONTENT"){return"Copyright"}if(c==""){return"ERROR! item missing apdid"}var b=this.titleTable[c];if(b){b=this.removeEntities(b)}return b};dataController.getIconForItemWithAPDID=function(d){if(d==""){return"ERROR! item missing apdid"}for(var b in this.table){var c=this.table[b];if(c.apdid==d){var a=c.icon;a=a.replace("Art/","../Contents/"+localizationController.language+"/Art/");return a}}};dataController.getFlattenStateForItemWithAPDID=function(c){if(c==""||c==undefined){return""}for(var a in this.table){var b=this.table[a];if(b.apdid==c){return b.flatten}}};dataController.getBodyForItemWithAPDID=function(f){if("function"==typeof(window.contentForID)){var a=contentForID(f,localizationController.language);if(a){return a}}for(var b in this.table){var e=this.table[b];if(e.apdid==f){var d=e.content;var c="../Contents/"+localizationController.language+"/Art/";d=d.replace(/src=\"Art\//g,'src="'+c);return d}}return""};dataController.getBase64ForImageAtPath=function(b){for(var a in this.graphics){var c=this.graphics[a];if(c.artPath==b){return c.base64}}};dataController.getParentAPDIDForItemWithAPDID=function(a){if(a==""||a==undefined){return""}return this.parentTable[a]};dataController.getChapterAPDIDForItemWithAPDID=function(b){var a=b;while(a&&this.getParentAPDIDForItemWithAPDID(a)!="TOP_LEVEL_ITEM"){a=this.getParentAPDIDForItemWithAPDID(a)}return a};dataController.getBreadcrumbsForItemWithAPDID=function(c){var b="";var a=this.getParentAPDIDForItemWithAPDID(c);while(a!="TOP_LEVEL_ITEM"){b=this.getTitleForItemWithAPDID(a)+" > "+b;a=this.getParentAPDIDForItemWithAPDID(a)}b=b.substring(0,b.length-2);return b};dataController.removeEntities=function(a){a=a.replace(/&amp;/g,"&");a=a.replace(/&lt;/g,"<");a=a.replace(/&gt;/g,">");return a};function dataControllerInit(){dataController.init()}window.addEventListener("load",dataControllerInit,false);dataController.initDatabase=function(){try{if(!window.openDatabase){alert("not supported")}else{var g=window.location.toString();var d=g.lastIndexOf("/");if(d!=-1){g=g.substring(0,d+1)}var a="User Guide - "+g;var c="1.0";var b="User Guide";var h=65536;this.database=openDatabase(a,c,b,h)}}catch(f){alert("Unknown error "+f+".");return}this.checkDatabaseVersion()};dataController.checkDatabaseVersion=function(){this.database.transaction(function(e){var a=new XMLHttpRequest();var c=dataController.dataFolder+"contentjson-version.txt";a.open("GET",c,false);try{a.send(null)}catch(b){a=null}if(!a||!(a.status==0||a.status==200)){console.log("Error retrieving JSON Version file.");var d=""}else{var d=a.responseText}e.executeSql("SELECT * FROM "+localizationController.language+'Config WHERE key="version"',[],function(h,f){var g=f.rows.item(0).value;dataController.databaseVersion=g;dataController.versionNumber=g;if(g==d||d==""){dataController.createDataStructure();dataController.createGraphicsDataStructure();return}h.executeSql("DROP TABLE IF EXISTS "+localizationController.language+"Content;",[],null,dataController.errorHandler);h.executeSql("DROP TABLE IF EXISTS "+localizationController.language+"Config;",[],null,dataController.errorHandler);h.executeSql("DROP TABLE IF EXISTS "+localizationController.language+"Graphics;",[],null,dataController.errorHandler);dataController.updateDatabaseVersion(d)},function(g,f){dataController.updateDatabaseVersion(d)})})};dataController.updateDatabaseVersion=function(a){this.database.transaction(function(b){dataController.databaseVersion=a;b.executeSql("CREATE TABLE "+localizationController.language+"Config (key TEXT NOT NULL, value TEXT NOT NULL);",[],null,dataController.errorHandler);b.executeSql("insert into "+localizationController.language+"Config (key, value) VALUES (?, ?);",["version",a],null,dataController.errorHandler);dataController.createTable();dataController.createGraphicsTable()})};dataController.createTable=function(){this.database.transaction(function(transaction){console.log("Loaded new JSON data into the Database.");var jsonRequest=new XMLHttpRequest();var jsonURL=dataController.dataFolder+"content.json";jsonRequest.open("GET",jsonURL,false);try{jsonRequest.send(null)}catch(err){jsonRequest=null}if(!jsonRequest||!(jsonRequest.status==0||jsonRequest.status==200)){console.log("Error retrieving JSON file.");return}try{var jsonObject=jsonRequest.responseText;eval(jsonObject);dataController.graphicCacheFromJSON=graphicCache}catch(err){if(localizationController.language!="en"){document.location="?lang=en"}else{alert("English content.json could not be parsed.")}return}transaction.executeSql("CREATE TABLE "+localizationController.language+"Content (id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, apdid TEXT NOT NULL, parentapdid TEXT NOT NULL, flatten TEXT NOT NULL, title TEXT NOT NULL, icon TEXT NOT NULL, keywords TEXT NOT NULL, content TEXT NOT NULL);",[],null,dataController.errorHandler);addItemsInArrayWithParentAPDID(jsonArray,"TOP_LEVEL_ITEM");function addItemsInArrayWithParentAPDID(array,parentAPDID){for(var i in array){var item=array[i];var flatten=0;if(item.flatten&&item.children&&item.children.length!=0){flatten=1}var name=item.name;var icon=item.icon;var keywords=item.keywords;var content=item.content;if(typeof(name)=="undefined"){name=""}if(typeof(icon)=="undefined"){icon=""}if(typeof(keywords)=="undefined"){keywords=""}if(typeof(content)=="undefined"){content=""}if(content==""&&item.intro){content=item.intro}addEntryToContentDatabase(item.apdid,parentAPDID,flatten,name,icon,keywords,content);if(item.children&&item.children.length!=0){addItemsInArrayWithParentAPDID(item.children,item.apdid)}}}function addEntryToContentDatabase(apdid,parentapdid,flatten,title,icon,keywords,content){transaction.executeSql("insert into "+localizationController.language+"Content (apdid, parentapdid, flatten, title, icon, keywords, content) VALUES (?, ?, ?, ?, ?, ?, ?);",[apdid,parentapdid,flatten,title,icon,keywords,content],null,dataController.errorHandler)}for(var key in configurationSettings){var value=configurationSettings[key];transaction.executeSql("insert into "+localizationController.language+"Config (key, value) VALUES (?, ?);",[key,value],null,dataController.errorHandler)}dataController.createDataStructure()})};dataController.createGraphicsTable=function(){this.database.transaction(function(d){console.log("Loaded new Graphics data into the Database.");d.executeSql("CREATE TABLE "+localizationController.language+"Graphics (id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, artPath TEXT NOT NULL, base64 TEXT NOT NULL);",[],null,dataController.errorHandler);var b=dataController.graphicCacheFromJSON;if(typeof(b)!="undefined"){for(var a in b){var c=b[a];e(a,c)}}function e(g,f){d.executeSql("insert into "+localizationController.language+"Graphics (artPath, base64) VALUES (?, ?);",[g,f],null,dataController.errorHandler)}dataController.createGraphicsDataStructure()})};dataController.createDataStructure=function(){this.database.transaction(function(a){a.executeSql("select * from "+localizationController.language+"Content;",[],function(e,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);dataController.table.push(d);dataController.titleTable[d.apdid]=d.title;dataController.parentTable[d.apdid]=d.parentapdid;if(!dataController.childrenTable[d.parentapdid]){dataController.childrenTable[d.parentapdid]=new Array()}if(d.apdid!="COPYRIGHT_PAGE_CONTENT"&&d.apdid!="COPYRIGHT_TAGLINE"){dataController.childrenTable[d.parentapdid].push(d.apdid)}}dataController.fixNestedSingularChildren();dataController.showCopyright=(""!=dataController.getBodyForItemWithAPDID("COPYRIGHT_PAGE_CONTENT")||""!=dataController.getBodyForItemWithAPDID("COPYRIGHT_TAGLINE"));dataController.database.transaction(function(f){f.executeSql("select * from "+localizationController.language+"Config;",[],function(k,g){for(var h=0;h<g.rows.length;h++){var j=g.rows.item(h);dataController.configurationSettings[j.key]=j.value;if(j.key=="MenuStructure"&&j.value=="Type=grouped,"){dataController.shouldFlatten=1}if(j.key=="Search"&&j.value=="disabled=true,"){dataController.shouldHideSearchButton=1}if(j.key=="BackButtonURL"&&j.value!=""&&j.value!="BackButtonURL"){dataController.mainTOCBackButtonURL=j.value}if(j.key=="BackButtonTitle"&&j.value!=""&&j.value!="BackButtonTitle"){dataController.mainTOCBackButtonTitle=j.value}if(j.key=="Title"&&j.value!=""){dataController.title=j.value;document.title=dataController.title}if(j.key=="AlternativeTitle"&&j.value!=""){dataController.alternativeTitle=j.value}if(j.key=="ShowVersionNumber"&&j.value=="1"){dataController.showVersionNumber=1}if(j.key=="WebclipIcon"){dataController.webclipIcon=j.value}if(j.key=="View"&&j.value=="Type=single-view,"){dataController.singleViewMode=1}if(j.key=="TopLevelDisplay"&&j.value=="Type=group,"){dataController.showGroupedTopLevel=1}if(j.key=="BuildVersion"){dataController.buildVersion=j.value}if(j.key=="HighResolutionGraphics"&&j.value=="true"){dataController.highResolutionGraphics=1}}controller.showInterface()},dataController.errorHandler)})},dataController.errorHandler)})};dataController.createGraphicsDataStructure=function(){this.database.transaction(function(a){a.executeSql("select * from "+localizationController.language+"Graphics;",[],function(d,b){for(var c=0;c<b.rows.length;c++){dataController.graphics.push(b.rows.item(c))}},dataController.errorHandler)})};dataController.performSearchWithQuery=function(b,a){if(b==""||b.length<2){a(new Array());return}b=b.replace(/^\s\s*/,"").replace(/\s\s*$/,"");searchQueryArray=b.split(" ");searchQueryContentLikeClause='( content LIKE "%'+searchQueryArray.join('%" AND content LIKE "%')+'%" )';searchQueryTitleLikeClause='( title LIKE "%'+searchQueryArray.join('%" AND title LIKE "%')+'%" )';searchQueryKeywordsLikeClause='( keywords LIKE "%'+searchQueryArray.join('%" AND keywords LIKE "%')+'%" )';this.database.transaction(function(d){var c="SELECT * FROM "+localizationController.language+"Content WHERE "+searchQueryContentLikeClause+" OR "+searchQueryTitleLikeClause+" OR "+searchQueryKeywordsLikeClause+" LIMIT 25";d.executeSql(c,[],function(f,o){var l=new Array();for(var h=0;h<o.rows.length;h++){var k=o.rows.item(h).apdid;if(0!=dataController.getChildrenAPDIDsForItemWithAPDID(k).length){continue}if(k=="COPYRIGHT_PAGE_CONTENT"||k=="COPYRIGHT_TAGLINE"){continue}var m=dataController.getBodyForItemWithAPDID(k);m=m.replace(/<\/?[^>]+(>|$)/g," ").replace(/\s+/g," ");var n=false;for(var g=0;searchQueryArrayItem=searchQueryArray[g++];){searchQueryArrayItem=String(searchQueryArrayItem).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1");var e=new RegExp(searchQueryArrayItem,"i");if(!e.exec(m)){n=true;break}}if(n){continue}l.push(k)}a(l)},dataController.errorHandler)})};dataController.errorHandler=function(b,a){console.log("Error Handler: "+a.message+" ("+a.code+")");if(-1!=a.message.indexOf("no such table")){dataController.database.transaction(function(c){c.executeSql("DROP TABLE IF EXISTS "+localizationController.language+"Content;",[],null,dataController.errorHandler);c.executeSql("DROP TABLE IF EXISTS "+localizationController.language+"Config;",[],null,dataController.errorHandler);c.executeSql("DROP TABLE IF EXISTS "+localizationController.language+"Graphics;",[],null,dataController.errorHandler);window.location.reload()})}return true};dataController.loadOverrideMethods=function(){var d=new XMLHttpRequest();var b=dataController.dataFolder+"../OverrideMethods.js";d.open("GET",b,false);try{d.send(null)}catch(c){d=null}if(!d||!(d.status==0||d.status==200)){return}var a=document.createElement("script");a.setAttribute("type","text/javascript");a.setAttribute("src",b);document.getElementsByTagName("head")[0].appendChild(a)};var localizationController={didLoadJSON:0,language:null};localizationController.init=function(){if(this.didLoadJSON){return}var currentURL=window.location.href;dataFolder=currentURL;dataFolder=dataFolder.substring(0,dataFolder.lastIndexOf("/"));dataFolder=dataFolder.substring(0,dataFolder.lastIndexOf("/"));dataFolder+="/Contents/";var infoJsonRequest=new XMLHttpRequest();var infoJsonURL=dataFolder+"Info.json";infoJsonRequest.open("GET",infoJsonURL,false);try{infoJsonRequest.send(null)}catch(err){infoJsonRequest=null}if(!infoJsonRequest||!(infoJsonRequest.status==0||infoJsonRequest.status==200)){console.log("Error retrieving Info.json file.");this.supportedLanguages=new Array;return}this.didLoadJSON=1;var infoJsonContents=eval(infoJsonRequest.responseText);infoJsonContents=infoJsonContents[0];this.supportedLanguages=infoJsonContents;this.supportedLanguagesCount=0;for(var key in this.supportedLanguages){this.supportedLanguagesCount+=1}localizationController.initializeUIElements()};localizationController.localize=function(){localizationController.init();var e=window.location.search;if(e.length>0){e=e.substring(1,e.length)}else{e=null}var d=new Object();if(e){for(var c=0;c<e.split("&").length;c++){var b=e.split("&")[c];d[b.split("=")[0]]=b.split("=")[1]}}var f=d.lang;if(f){this.language=f}else{var a=navigator.language.substring(0,2);if("zh"==a){if("zh-cn"==navigator.language){a="zh_CN"}else{if("zh-tw"==navigator.language){a="zh_TW"}}}else{if("pt"==a){if("pt-br"==navigator.language){a="pt_BR"}else{if("pt-pt"==navigator.language){a="pt"}}}else{if("nb"==a){a="no"}}}if(a&&this.supportedLanguages[a]){this.language=a}else{this.language="en"}}if(this.language=="he"){document.getElementsByTagName("html")[0].setAttribute("dir","rtl")}};localizationController.localizedUIString=function(c){var b=localizationController.uiElements[localizationController.language];if(!b){return c}var a=b[c];if(!a){return c}return a};localizationController.getLanguagesView=function(){localizationController.languages=new Array();localizationController.languageListView=new ADTableView();localizationController.languageListView.style=ADTableViewStylePlain;localizationController.languageListView.autoresizingMask=ADViewAutoresizingFlexibleWidth|ADViewAutoresizingFlexibleHeight;localizationController.languageListView.position=new ADPoint(0,0);localizationController.languageListView.dataSource=localizationController;localizationController.languageListView.delegate=localizationController;localizationController.languageListView.reloadData();return localizationController.languageListView};localizationController.numberOfSectionsInTableView=function(a){return 1};localizationController.tableViewNumberOfRowsInSection=function(a,b){return this.supportedLanguagesCount};localizationController.tableViewCellForRowAtPath=function(b,c){var a=new ADTableViewCell();var e=0;for(var d in this.supportedLanguages){if(e==c.row){a.text=this.supportedLanguages[d];break}e++}return a};localizationController.tableViewDidSelectRowAtPath=function(a,d){var c=0;for(var b in this.supportedLanguages){if(c==d.row){var e=b;break}c++}document.location="?lang="+e};localizationController.initializeUIElements=function(){localizationController.uiElements=eval({bg:{Search:"?????",Cancel:"??????","Change Language":"??????? ????","Loading...":"?????????...","Missing Image:":"???????? ???????????:"},ca:{Search:"Cerca",Cancel:"Cancel·la","Change Language":"Canvia l'idioma","Loading...":"Carregant...","Missing Image:":"Falta l'imatge:"},cs:{Search:"Hledat",Cancel:"Zrušit","Change Language":"Zmenit jazyk","Loading...":"Nacítání…","Missing Image:":"Chybí obrázek:"},da:{Search:"Søg",Cancel:"Annuller","Change Language":"Skift sprog","Loading...":"Indlæser...","Missing Image:":"Manglende billede:"},de:{Search:"Suchen",Cancel:"Abbrechen","Change Language":"Sprache wechseln","Loading...":"Laden ...","Missing Image:":"Fehlendes Bild:"},el:{Search:"??a??t?s?",Cancel:"?????s?","Change Language":"???a?? ???ssa?","Loading...":"F??t?s?...","Missing Image:":"?e?pe? e????a:"},en:{Search:"Search",Cancel:"Cancel","Change Language":"Change Language","Loading...":"Loading...","Missing Image:":"Missing Image:"},en_GB:{Search:"Search",Cancel:"Cancel","Change Language":"Change Language","Loading...":"Loading...","Missing Image:":"Missing Image:"},es:{Search:"Buscar",Cancel:"Cancelar","Change Language":"Cambiar idioma","Loading...":"Cargando...","Missing Image:":"Falta imagen:"},et:{Search:"Otsi",Cancel:"Tühista","Change Language":"Muuda keelt","Loading...":"Laadimine...","Missing Image:":"Puuduv pilt:"},fi:{Search:"Etsi",Cancel:"Kumoa","Change Language":"Vaihda kieli","Loading...":"Ladataan...","Missing Image:":"Puuttuva kuva:"},fr:{Search:"Rechercher",Cancel:"Annuler","Change Language":"Changer de langue","Loading...":"Chargement...","Missing Image:":"Image manquante :"},hr:{Search:"Traži",Cancel:"Poništi","Change Language":"Promijeni jezik","Loading...":"Ucitavanje...","Missing Image:":"Nedostaje slika:"},hu:{Search:"Keresd",Cancel:"Mégsem","Change Language":"Válts nyelvet","Loading...":"Betöltés...","Missing Image:":"Hiányzó kép:"},id:{Search:"Cari",Cancel:"Batalkan","Change Language":"Ganti Bahasa","Loading...":"Memuat...","Missing Image:":"Gambar Hilang:"},it:{Search:"Cerca",Cancel:"Annulla","Change Language":"Cambia lingua","Loading...":"Carico...","Missing Image:":"Immagine mancante:"},ja:{Search:"??",Cancel:"?????","Change Language":"?????","Loading...":"?????...","Missing Image:":"??????????:"},ko:{Search:"??",Cancel:"??","Change Language":"?? ??","Loading...":"?? ?...","Missing Image:":"?? ???:"},lt:{Search:"Ieškoti",Cancel:"Atšaukti","Change Language":"Pakeisti kalba","Loading...":"Ikeliama...","Missing Image:":"Trukstamas paveikslas:"},lv:{Search:"Meklet",Cancel:"Atcelt","Change Language":"Mainit valodu","Loading...":"Notiek ielade...","Missing Image:":"Trukst attela:"},me:{Search:"Traži",Cancel:"Odustani","Change Language":"Promjena jezika","Loading...":"Ucitavanje...","Missing Image:":"Nedostajuca slika:"},mk:{Search:"????????",Cancel:"??????","Change Language":"??????? ?????","Loading...":"?????????...","Missing Image:":"??????????? ???????:"},my:{Search:"Cari",Cancel:"Batal","Change Language":"Tukar Bahasa","Loading...":"Memuat...","Missing Image:":"Imej Tiada:"},nl:{Search:"Zoek",Cancel:"Annuleer","Change Language":"Wijzig taal","Loading...":"Laden...","Missing Image:":"Ontbrekende afbeelding:"},no:{Search:"Søk",Cancel:"Avbryt","Change Language":"Endre språk","Loading...":"Laster inn...","Missing Image:":"Bilde mangler:"},pl:{Search:"Szukaj",Cancel:"Anuluj","Change Language":"Zmien jezyk","Loading...":"Wczytuje...","Missing Image:":"Brak obrazu dysku:"},pt:{Search:"Pesquisar",Cancel:"Cancelar","Change Language":"Alterar idioma","Loading...":"A carregar...","Missing Image:":"Falta a imagem:"},pt_BR:{Search:"Pesquisar",Cancel:"Cancelar","Change Language":"Alterar idioma","Loading...":"A carregar...","Missing Image:":"Imagem ausente:"},ro:{Search:"Cautare",Cancel:"Anulare","Change Language":"Schimbare limba","Loading...":"Încarcare...","Missing Image:":"Imagine lipsa:"},ru:{Search:"??????",Cancel:"????????","Change Language":"???????? ????","Loading...":"????????...","Missing Image:":"??????????? ???????????:"},sk:{Search:"Vyhladat",Cancel:"Zrušit","Change Language":"Zmenit jazyk","Loading...":"Nacítava sa…","Missing Image:":"Chýba obrázok:"},sv:{Search:"Sök",Cancel:"Avbryt","Change Language":"Byt språk","Loading...":"Läser in...","Missing Image:":"Bild som saknas:"},th:{Search:"?????",Cancel:"??????","Change Language":"???????????","Loading...":"?????????...","Missing Image:":"??????????????:"},tr:{Search:"Ara",Cancel:"Vazgeç","Change Language":"Dili Degistir","Loading...":"Yükleniyor...","Missing Image:":"Görüntü Eksik:"},uk:{Search:"?????",Cancel:"?????????","Change Language":"??????? ????","Loading...":"????????????...","Missing Image:":"???????? ??????????:"},vi:{Search:"Tìm ki?m",Cancel:"H?y","Change Language":"Thay d?i Ngôn ng?","Loading...":"Ðang t?i...","Missing Image:":"Thi?u ?nh:"},zh_CN:{Search:"??",Cancel:"??","Change Language":"????","Loading...":"????…","Missing Image:":"????:"},zh_TW:{Search:"??",Cancel:"??","Change Language":"????","Loading...":"?????","Missing Image:":"????:"},})};var searchController={searchDelay:null,};searchController.getSearchItem=function(){if(dataController.shouldHideSearchButton){return null}if(!this.searchItem){if(dataController.singleViewMode){this.searchItem=new ADBarButtonItem();this.searchItem.image=new ADImage("images/search.png",true);this.searchItem.width=35;this.searchItem.addEventListener("controlTouchUpInside",function(){searchController.showSinglePaneViewSearchView()},false)}else{this.searchBar=new ADSearchBar();this.searchBar.text="";this.searchBar.delegate=searchController;this.searchBar.zIndex=100;this.searchItem=new ADBarButtonItem(ADBarButtonItemTypePlain);this.searchItem.customView=this.searchBar;this.resizeSearchField()}}return this.searchItem};searchController.resizeSearchField=function(){if(!this.searchItem){return}if(dataController.singleViewMode){return}switch(window.orientation){case 0:case 180:this.searchItem.width=116;break;case 90:case -90:this.searchItem.width=180;break;default:this.searchItem.width=200;break}};searchController.showSinglePaneViewSearchView=function(){var c=new ADViewController();c.view=new ADView();c.view.zIndex=1;c._isSearchResults=true;c._apdid="searchView";c.title=localizationController.localizedUIString("Search");var b=controller.rightNavigationController.view.size;this.searchBar=new ADSearchBar();this.searchBar.style=ADSearchBarStyleBlack;this.searchBar.showsCancelButton=true;this.searchBar.text="";this.searchBar.placeholder=localizationController.localizedUIString("Search");this.searchBar.button.title=localizationController.localizedUIString("Cancel");this.searchBar.delegate=this;this.searchBar.size=new ADSize(b.width,ADSearchBarHeight);this.searchBar.autoresizingMask=ADViewAutoresizingFlexibleWidth;c.view.addSubview(this.searchBar);var a=new ADTableView();a.autoresizingMask=ADViewAutoresizingFlexibleWidth|ADViewAutoresizingFlexibleHeight;a.style=ADTableViewStylePlain;a.position=new ADPoint(0,ADSearchBarHeight);a.size=new ADSize(b.width,b.height-ADSearchBarHeight);a.dataSource=this;a.delegate=this;a.layer.style.background="white";c.view.addSubview(a);c._searchResultsList=a;c._searchResultsList._searchResultsArray=[];a.reloadData();controller.showSearchResultsView(c)};searchController.numberOfSectionsInTableView=function(a){return 1};searchController.tableViewNumberOfRowsInSection=function(a,b){return a._searchResultsArray.length};searchController.tableViewCellForRowAtPath=function(b,c){var e=b._searchResultsArray[c.row];var d=dataController.getTitleForItemWithAPDID(e);var a=new ADTableViewCell(ADTableViewCellStyleSubtitle);a.text=d;a.detailedText=dataController.getBreadcrumbsForItemWithAPDID(e);a.accessoryType=ADTableViewCellAccessoryDisclosureIndicator;return a};searchController.tableViewDidSelectAccessoryForRowAtPath=function(a,b){searchController.tableViewDidSelectRowAtPath(a,b)};searchController.tableViewDidSelectRowAtPath=function(a,b){var c=a._searchResultsArray[b.row];if(!c){return}this.searchBar.editing=false;if(!dataController.singleViewMode){this.searchBar.text=""}setTimeout(function(){a.deselectRowAtPathAnimated(b,false)},ADTransitionDefaults.duration*1000);controller.navigateToElement(c,false)};searchController.searchBarTextDidChange=function(e,d){if(""==d){return}var b=controller.rightNavigationController.topViewController;var c=null;if(true==b._isSearchResults){c=b}else{c=new ADViewController();c._isSearchResults=true;c._apdid="searchView";c.title=localizationController.localizedUIString("Search");var a=new ADTableView();a.autoresizingMask=ADViewAutoresizingFlexibleWidth|ADViewAutoresizingFlexibleHeight;a.style=ADTableViewStylePlain;a.dataSource=this;a.delegate=this;c.view=a;c._searchResultsList=a;c._searchResultsList._searchResultsArray=[];a.reloadData();c.navigationItem.rightBarButtonItem=searchController.getSearchItem();controller.showSearchResultsView(c)}clearTimeout(this.searchDelay);this.searchDelay=setTimeout(function(){dataController.performSearchWithQuery(d,searchController.didPerformSearch);trackingController.userSearchedForPhrase(d)},1000)};searchController.didPerformSearch=function(b){var a=controller.rightNavigationController.topViewController;if(true==a._isSearchResults){a._searchResultsList._searchResultsArray=b;a._searchResultsList.reloadData();a._searchResultsList.setContentOffsetAnimated(new ADPoint(0,0),false)}};searchController.searchBarTextDidBeginEditing=function(a){scrollTo(0,0)};searchController.searchBarCancelButtonClicked=function(a){controller.hideSearchResultsView()};var trackingController={};(function(){var g="helpSession";var b=Math.round(Math.random()*1000000)+"-"+new Date().getTime();var c=(location.protocol.match(/^http/)?"/activity/":"http://help.apple.com/activity/");var k={base:function(){return dataController.versionNumber},when:function(){return new Date().getTime()},session:j(),language:function(){return localizationController.language}};var d=null;trackingController.userNavigatedFromIDToID=function(m,l){if(l==d){return}d=l;a({action:"navigate",src:m,target:l})};trackingController.userSearchedForPhrase=function(l){a({action:"search",phrase:l})};var e=new XMLHttpRequest();function a(m){if(location.host.match(/^localhost/)){return}if(""==location.host){return}var l=c+i(k)+";"+i(m);e.open("GET",l);e.send()}function i(o){var l=[];for(var m in o){var n=o[m];if(typeof n==="function"){n=n()}l.push(m+"="+n)}return l.join(";")}function j(){return h()||f()}function h(){var o={};var m=document.cookie.split(/;\s+/);for(var n=0;n<m.length;n++){var l=m[n].split(/\=/);o[l[0]]=l[1]}return o[g]}function f(){var l=new Date(new Date().getTime()+(1000*60*60*24*365*10)).toUTCString();var n=(location.host.match(/apple.com$/)?"; domain=apple.com":"");var m=g+"="+b+"; expires="+l+"; path=/"+n;document.cookie=m;return h()}}());

